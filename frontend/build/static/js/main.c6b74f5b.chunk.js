(this["webpackJsonpweather-alert-system-frontend"]=this["webpackJsonpweather-alert-system-frontend"]||[]).push([[0],{45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),r=a(8),n=a.n(r),l=a(7),i=a(3),d=a(47),o=a(48),j=a(49),b=a(50),x=a(51),m=a(2);var h=()=>{const e=Object(i.n)(),[t,a]=Object(c.useState)(!1);Object(c.useEffect)(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const s=t=>"flex items-center gap-2 px-4 py-2 rounded-lg transition\n     ".concat(e.pathname===t?"bg-primary text-white":"hover:bg-primary/80 hover:text-white");return Object(m.jsx)("nav",{className:"bg-gray-900 dark:bg-gray-800 text-gray-100 sticky top-0 z-50 shadow-md",children:Object(m.jsxs)("div",{className:"container mx-auto flex justify-between items-center px-4 py-3",children:[Object(m.jsxs)("div",{className:"flex space-x-4",children:[Object(m.jsxs)(l.b,{to:"/",className:s("/"),children:[Object(m.jsx)(d.a,{size:18})," Home"]}),Object(m.jsxs)(l.b,{to:"/alerts",className:s("/alerts"),children:[Object(m.jsx)(o.a,{size:18})," Alerts"]}),Object(m.jsxs)(l.b,{to:"/status",className:s("/status"),children:[Object(m.jsx)(j.a,{size:18})," Status"]})]}),Object(m.jsx)("button",{onClick:()=>a(!t),className:"p-2 rounded-full bg-gray-700 dark:bg-gray-200 text-white dark:text-gray-800 hover:bg-gray-600 dark:hover:bg-gray-300 transition",children:t?Object(m.jsx)(b.a,{size:18}):Object(m.jsx)(x.a,{size:18})})]})})},p=a(20);const O=a.n(p).a.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}}),u=async e=>(await O.get("/weather/realtime?location=".concat(encodeURIComponent(e)))).data,y=async e=>(await O.post("/alerts",e)).data,g=async()=>(await O.get("/alerts")).data,v=async e=>{await O.delete("/alerts/".concat(e))};var N=()=>{const[e,t]=Object(c.useState)("Tel Aviv"),[a,s]=Object(c.useState)(null),[r,n]=Object(c.useState)(!1),l=async()=>{n(!0);try{const t=await u(e);s(t)}catch(t){console.error(t)}finally{n(!1)}};return Object(c.useEffect)(()=>{l()},[]),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"card max-w-md mx-auto",children:[Object(m.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter location...",className:"input mb-2"}),Object(m.jsx)("button",{onClick:l,className:"btn mb-4",children:"Update Location"}),r?Object(m.jsx)("div",{children:"Loading..."}):a?Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsx)("h2",{className:"text-2xl mb-2",children:e}),Object(m.jsxs)("div",{className:"text-4xl font-bold",children:[a.temperature,"\xb0C"]}),Object(m.jsxs)("div",{className:"text-gray-600",children:["Feels like: ",a.feels_like,"\xb0C"]}),Object(m.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("strong",{children:"Wind:"})," ",a.wind_speed," m/s"]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("strong",{children:"Humidity:"})," ",a.humidity,"%"]})]})]}):Object(m.jsx)("div",{children:"No weather data available"})]})})},w=a(5);var f=()=>{const[e,t]=Object(c.useState)({name:"",locationType:"city",city:"",parameter:"temperature",operator:">",threshold:0,description:""});return Object(m.jsxs)("form",{onSubmit:async a=>{a.preventDefault();try{await y(e),t({name:"",locationType:"city",city:"",parameter:"temperature",operator:">",threshold:0,description:""})}catch(c){console.error("Failed to create alert:",c)}},className:"space-y-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"block mb-2",children:"Alert Name:"}),Object(m.jsx)("input",{type:"text",value:e.name,onChange:a=>t(Object(w.a)(Object(w.a)({},e),{},{name:a.target.value})),className:"w-full p-2 border rounded"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"block mb-2",children:"Location Type:"}),Object(m.jsxs)("select",{value:e.locationType,onChange:a=>t(Object(w.a)(Object(w.a)({},e),{},{locationType:a.target.value})),className:"w-full p-2 border rounded",children:[Object(m.jsx)("option",{value:"city",children:"City"}),Object(m.jsx)("option",{value:"coords",children:"Coordinates"})]})]}),"city"===e.locationType?Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"block mb-2",children:"City:"}),Object(m.jsx)("input",{type:"text",value:e.city,onChange:a=>t(Object(w.a)(Object(w.a)({},e),{},{city:a.target.value})),className:"w-full p-2 border rounded"})]}):null,Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"block mb-2",children:"Parameter:"}),Object(m.jsxs)("select",{value:e.parameter,onChange:a=>t(Object(w.a)(Object(w.a)({},e),{},{parameter:a.target.value})),className:"w-full p-2 border rounded",children:[Object(m.jsx)("option",{value:"temperature",children:"Temperature"}),Object(m.jsx)("option",{value:"windSpeed",children:"Wind Speed"}),Object(m.jsx)("option",{value:"precipitation",children:"Precipitation"})]})]}),Object(m.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Create Alert"})]})},k=a(52),C=a(53);var S=()=>{const[e,t]=Object(c.useState)([]);Object(c.useEffect)(()=>{a()},[]);const a=async()=>{try{const e=await g();t(e)}catch(e){console.error(e)}};return Object(m.jsxs)("div",{className:"container mx-auto px-4 py-6 grid md:grid-cols-2 gap-8",children:[Object(m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition animate-fadeIn",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4 text-secondary",children:"\u2795 Create New Alert"}),Object(m.jsx)(f,{children:a})]}),Object(m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition animate-fadeIn",children:[Object(m.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-gray-200",children:"\ud83d\udccb Existing Alerts"}),0===e.length?Object(m.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No alerts yet"}):Object(m.jsx)("div",{className:"space-y-4",children:e.map(e=>Object(m.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow hover:shadow-md transition",children:[Object(m.jsx)("h3",{className:"font-bold text-lg",children:e.name||"Unnamed Alert"}),Object(m.jsxs)("p",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[Object(m.jsx)(k.a,{className:"w-5 h-5"}),"city"===e.locationType?e.city:"".concat(e.lat,",").concat(e.lon)]}),Object(m.jsxs)("p",{className:"mt-1 text-gray-700 dark:text-gray-300",children:[e.parameter," ",e.operator," ",e.threshold]}),Object(m.jsxs)("button",{onClick:()=>e.id&&(async e=>{if(window.confirm("Delete this alert?"))try{await v(e),await a()}catch(t){console.error(t)}})(e.id),className:"mt-3 flex items-center gap-2 bg-danger hover:bg-red-600 text-white px-3 py-1 rounded transition",children:[Object(m.jsx)(C.a,{size:14})," Delete"]})]},e.id))})]})]})},T=a(54),A=a(55);var E=()=>{const[e,t]=Object(c.useState)([]),[a,s]=Object(c.useState)(!0);return Object(c.useEffect)(()=>{const e=async()=>{try{const e=(await g()).filter(e=>e);t(e)}catch(e){console.error(e)}finally{s(!1)}};e();const a=setInterval(e,6e4);return()=>clearInterval(a)},[]),a?Object(m.jsx)("div",{className:"flex justify-center py-8 text-primary",children:"Loading..."}):Object(m.jsx)("div",{className:"container mx-auto px-4 py-6",children:Object(m.jsx)("div",{className:"max-w-2xl mx-auto space-y-4",children:e.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h2",{className:"text-xl font-bold mb-4 text-danger flex items-center gap-2",children:[Object(m.jsx)(T.a,{className:"w-6 h-6"})," Active Alerts"]}),e.map(e=>Object(m.jsxs)("div",{className:"bg-red-50 dark:bg-red-900 border-l-4 border-danger p-4 rounded-xl animate-pulse",children:[Object(m.jsx)("h3",{className:"font-bold text-lg",children:e.name}),Object(m.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:["Location:"," ","city"===e.locationType?e.city:"".concat(e.lat,",").concat(e.lon)]}),Object(m.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:["Condition: ",e.parameter," ",e.operator," ",e.threshold]})]},e.id))]}):Object(m.jsxs)("div",{className:"text-center py-12 bg-success/20 dark:bg-green-900 rounded-2xl shadow animate-fadeIn",children:[Object(m.jsx)(A.a,{className:"w-12 h-12 text-success mx-auto mb-2"}),Object(m.jsx)("h2",{className:"text-2xl font-bold text-success",children:"\u2713 All Clear"}),Object(m.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"No alerts currently triggered"})]})})})};var L=()=>Object(m.jsx)(l.a,{children:Object(m.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[Object(m.jsx)(h,{}),Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{path:"/",element:Object(m.jsx)(N,{})}),Object(m.jsx)(i.a,{path:"/alerts",element:Object(m.jsx)(S,{})}),Object(m.jsx)(i.a,{path:"/status",element:Object(m.jsx)(E,{})})]})]})});a(45);n.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.c6b74f5b.chunk.js.map